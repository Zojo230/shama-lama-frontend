{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./ChatPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChatPage=()=>{const[name,setName]=useState('');const[message,setMessage]=useState('');const[messages,setMessages]=useState([]);// ðŸ”„ Detect local vs deployed\nconst backendBase=window.location.hostname==='localhost'?'http://localhost:4000':'https://pickem-backend-2025.onrender.com';const fetchMessages=()=>{fetch(\"\".concat(backendBase,\"/api/chat\")).then(res=>res.json()).then(data=>{setMessages(data.reverse());// newest at bottom\n}).catch(err=>console.error('Failed to load chat:',err));};useEffect(()=>{fetchMessages();const interval=setInterval(fetchMessages,5000);// auto-refresh every 5 seconds\nreturn()=>clearInterval(interval);},[]);const sendMessage=()=>{if(!name||!message)return;fetch(\"\".concat(backendBase,\"/api/chat\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name,message})}).then(()=>{setMessage('');fetchMessages();});};return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-box\",children:messages.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"no-messages\",children:\"No messages yet\"}):messages.map((msg,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"chat-message\",children:[/*#__PURE__*/_jsxs(\"strong\",{children:[msg.name,\":\"]}),\" \",msg.message]},index))}),/*#__PURE__*/_jsx(\"input\",{className:\"chat-input\",type:\"text\",placeholder:\"Enter your game name\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"textarea\",{className:\"chat-textarea\",placeholder:\"Type your message\",value:message,onChange:e=>setMessage(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"chat-button\",onClick:sendMessage,children:\"Send\"})]});};export default ChatPage;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","ChatPage","name","setName","message","setMessage","messages","setMessages","backendBase","window","location","hostname","fetchMessages","fetch","concat","then","res","json","data","reverse","catch","err","console","error","interval","setInterval","clearInterval","sendMessage","method","headers","body","JSON","stringify","className","children","length","map","msg","index","type","placeholder","value","onChange","e","target","onClick"],"sources":["C:/Users/Allison/Desktop/MyPicksProgram/Program_by_ChatGPT_June_7_2025_Frontend/src/components/ChatPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport './ChatPage.css';\r\n\r\nconst ChatPage = () => {\r\n  const [name, setName] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  // ðŸ”„ Detect local vs deployed\r\n  const backendBase =\r\n    window.location.hostname === 'localhost'\r\n      ? 'http://localhost:4000'\r\n      : 'https://pickem-backend-2025.onrender.com';\r\n\r\n  const fetchMessages = () => {\r\n    fetch(`${backendBase}/api/chat`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setMessages(data.reverse()); // newest at bottom\r\n      })\r\n      .catch(err => console.error('Failed to load chat:', err));\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchMessages();\r\n    const interval = setInterval(fetchMessages, 5000); // auto-refresh every 5 seconds\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const sendMessage = () => {\r\n    if (!name || !message) return;\r\n    fetch(`${backendBase}/api/chat`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ name, message }),\r\n    })\r\n      .then(() => {\r\n        setMessage('');\r\n        fetchMessages();\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"chat-container\">\r\n      <div className=\"chat-box\">\r\n        {messages.length === 0 ? (\r\n          <p className=\"no-messages\">No messages yet</p>\r\n        ) : (\r\n          messages.map((msg, index) => (\r\n            <div key={index} className=\"chat-message\">\r\n              <strong>{msg.name}:</strong> {msg.message}\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n      <input\r\n        className=\"chat-input\"\r\n        type=\"text\"\r\n        placeholder=\"Enter your game name\"\r\n        value={name}\r\n        onChange={e => setName(e.target.value)}\r\n      />\r\n      <textarea\r\n        className=\"chat-textarea\"\r\n        placeholder=\"Type your message\"\r\n        value={message}\r\n        onChange={e => setMessage(e.target.value)}\r\n      />\r\n      <button className=\"chat-button\" onClick={sendMessage}>Send</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}